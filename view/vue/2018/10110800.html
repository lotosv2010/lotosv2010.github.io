<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>vue源码分析(十一) 编译之解析(parse)——parse | 码农沉思录</title>
    <meta name="generator" content="VuePress 1.9.9">
    <link rel="icon" href="/favicon.jpg">
    <meta name="description" content="代码千万行, 注释第一行, 编码不规范, 同事两行泪">
    <meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=no">
    
    <link rel="preload" href="/assets/css/0.styles.92019516.css" as="style"><link rel="preload" href="/assets/js/app.ad2c5d61.js" as="script"><link rel="preload" href="/assets/js/4.82f582a9.js" as="script"><link rel="preload" href="/assets/js/1.72e48573.js" as="script"><link rel="preload" href="/assets/js/52.5a757ff9.js" as="script"><link rel="prefetch" href="/assets/js/10.6bbbb4af.js"><link rel="prefetch" href="/assets/js/11.84886e2e.js"><link rel="prefetch" href="/assets/js/12.6ab8637d.js"><link rel="prefetch" href="/assets/js/13.ea9ef3eb.js"><link rel="prefetch" href="/assets/js/14.865dcee3.js"><link rel="prefetch" href="/assets/js/15.49d2e55e.js"><link rel="prefetch" href="/assets/js/16.0b37b058.js"><link rel="prefetch" href="/assets/js/17.e5cd5fdd.js"><link rel="prefetch" href="/assets/js/18.85dd604a.js"><link rel="prefetch" href="/assets/js/19.f588c03c.js"><link rel="prefetch" href="/assets/js/20.33d127dd.js"><link rel="prefetch" href="/assets/js/21.2726927d.js"><link rel="prefetch" href="/assets/js/22.95f3f4a3.js"><link rel="prefetch" href="/assets/js/23.d8a538a6.js"><link rel="prefetch" href="/assets/js/24.17ad2529.js"><link rel="prefetch" href="/assets/js/25.f51b2675.js"><link rel="prefetch" href="/assets/js/26.934ec669.js"><link rel="prefetch" href="/assets/js/27.72508c77.js"><link rel="prefetch" href="/assets/js/28.2b0959c4.js"><link rel="prefetch" href="/assets/js/29.1c963303.js"><link rel="prefetch" href="/assets/js/30.8e399044.js"><link rel="prefetch" href="/assets/js/31.e4928ff3.js"><link rel="prefetch" href="/assets/js/32.c6b6ef8d.js"><link rel="prefetch" href="/assets/js/33.ddfa1e4c.js"><link rel="prefetch" href="/assets/js/34.3e4256dd.js"><link rel="prefetch" href="/assets/js/35.8a92b27b.js"><link rel="prefetch" href="/assets/js/36.4167114e.js"><link rel="prefetch" href="/assets/js/37.11de70c3.js"><link rel="prefetch" href="/assets/js/38.51bfcef9.js"><link rel="prefetch" href="/assets/js/39.391d16d4.js"><link rel="prefetch" href="/assets/js/40.75c9b958.js"><link rel="prefetch" href="/assets/js/41.adff1d44.js"><link rel="prefetch" href="/assets/js/42.b18f2f3c.js"><link rel="prefetch" href="/assets/js/43.39857e56.js"><link rel="prefetch" href="/assets/js/44.8d646eb3.js"><link rel="prefetch" href="/assets/js/45.8696e081.js"><link rel="prefetch" href="/assets/js/46.6b1aef3a.js"><link rel="prefetch" href="/assets/js/47.6c8a36c8.js"><link rel="prefetch" href="/assets/js/48.c54441d1.js"><link rel="prefetch" href="/assets/js/49.902cc547.js"><link rel="prefetch" href="/assets/js/5.ebb7f635.js"><link rel="prefetch" href="/assets/js/50.b6dd2518.js"><link rel="prefetch" href="/assets/js/51.ebec3ecf.js"><link rel="prefetch" href="/assets/js/53.381b38f6.js"><link rel="prefetch" href="/assets/js/54.5a34c05b.js"><link rel="prefetch" href="/assets/js/55.a7716bd5.js"><link rel="prefetch" href="/assets/js/56.30b8e2e3.js"><link rel="prefetch" href="/assets/js/57.079ff0b7.js"><link rel="prefetch" href="/assets/js/58.23b4a501.js"><link rel="prefetch" href="/assets/js/59.f41538da.js"><link rel="prefetch" href="/assets/js/6.d3a9d217.js"><link rel="prefetch" href="/assets/js/60.8801415c.js"><link rel="prefetch" href="/assets/js/61.296117b6.js"><link rel="prefetch" href="/assets/js/62.0380b2ff.js"><link rel="prefetch" href="/assets/js/63.4e82cbaa.js"><link rel="prefetch" href="/assets/js/7.6156d368.js"><link rel="prefetch" href="/assets/js/8.1c82c0e7.js"><link rel="prefetch" href="/assets/js/9.3648f843.js"><link rel="prefetch" href="/assets/js/vendors~flowchart.83298789.js">
    <link rel="stylesheet" href="/assets/css/0.styles.92019516.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container no-sidebar" data-v-7dd95ae2><div data-v-7dd95ae2><div class="password-shadow password-wrapper-out" style="display:none;" data-v-59e6cb88 data-v-7dd95ae2 data-v-7dd95ae2><h3 class="title" data-v-59e6cb88>码农沉思录</h3> <p class="description" data-v-59e6cb88>代码千万行, 注释第一行, 编码不规范, 同事两行泪</p> <label id="box" class="inputBox" data-v-59e6cb88><input type="password" value="" data-v-59e6cb88> <span data-v-59e6cb88>Konck! Knock!</span> <button data-v-59e6cb88>OK</button></label> <div class="footer" data-v-59e6cb88><span data-v-59e6cb88><i class="iconfont reco-theme" data-v-59e6cb88></i> <a target="blank" href="https://vuepress-theme-reco.recoluan.com" data-v-59e6cb88>vuePress-theme-reco</a></span> <span data-v-59e6cb88><i class="iconfont reco-copyright" data-v-59e6cb88></i> <a data-v-59e6cb88><span data-v-59e6cb88>Robin</span>
          
        <span data-v-59e6cb88>2015 - </span>
        2023
      </a></span></div></div> <div class="hide" data-v-7dd95ae2><header class="navbar" data-v-7dd95ae2><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/head.jpg" alt="码农沉思录" class="logo"> <span class="site-name">码农沉思录</span></a> <div class="links"><div class="color-picker"><a class="color-button"><i class="iconfont reco-color"></i></a> <div class="color-picker-menu" style="display:none;"><div class="mode-options"><h4 class="title">Choose mode</h4> <ul class="color-mode-options"><li class="dark">dark</li><li class="auto active">auto</li><li class="light">light</li></ul></div></div></div> <div class="search-box"><i class="iconfont reco-search"></i> <input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link"><i class="iconfont reco-home"></i>
  Home
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-category"></i>
      Category
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/categories/css系统梳理/" class="nav-link"><i class="undefined"></i>
  css系统梳理
</a></li><li class="dropdown-item"><!----> <a href="/categories/css响应式/" class="nav-link"><i class="undefined"></i>
  css响应式
</a></li><li class="dropdown-item"><!----> <a href="/categories/简历/" class="nav-link"><i class="undefined"></i>
  简历
</a></li><li class="dropdown-item"><!----> <a href="/categories/ES系统梳理/" class="nav-link"><i class="undefined"></i>
  ES系统梳理
</a></li><li class="dropdown-item"><!----> <a href="/categories/html5系统梳理/" class="nav-link"><i class="undefined"></i>
  html5系统梳理
</a></li><li class="dropdown-item"><!----> <a href="/categories/js基础/" class="nav-link"><i class="undefined"></i>
  js基础
</a></li><li class="dropdown-item"><!----> <a href="/categories/js面试题/" class="nav-link"><i class="undefined"></i>
  js面试题
</a></li><li class="dropdown-item"><!----> <a href="/categories/jquery源码分析/" class="nav-link"><i class="undefined"></i>
  jquery源码分析
</a></li><li class="dropdown-item"><!----> <a href="/categories/PMP考试每日一题/" class="nav-link"><i class="undefined"></i>
  PMP考试每日一题
</a></li><li class="dropdown-item"><!----> <a href="/categories/react源码分析/" class="nav-link"><i class="undefined"></i>
  react源码分析
</a></li><li class="dropdown-item"><!----> <a href="/categories/软考高级每日三题/" class="nav-link"><i class="undefined"></i>
  软考高级每日三题
</a></li><li class="dropdown-item"><!----> <a href="/categories/软考高级解锁打卡/" class="nav-link"><i class="undefined"></i>
  软考高级解锁打卡
</a></li><li class="dropdown-item"><!----> <a href="/categories/软考高级日历打卡/" class="nav-link"><i class="undefined"></i>
  软考高级日历打卡
</a></li><li class="dropdown-item"><!----> <a href="/categories/vue源码分析/" class="nav-link"><i class="undefined"></i>
  vue源码分析
</a></li><li class="dropdown-item"><!----> <a href="/categories/webpack前端工程化/" class="nav-link"><i class="undefined"></i>
  webpack前端工程化
</a></li><li class="dropdown-item"><!----> <a href="/categories/聚焦Vue、React、Webpack/" class="nav-link"><i class="undefined"></i>
  聚焦Vue、React、Webpack
</a></li></ul></div></div><div class="nav-item"><a href="/tag/" class="nav-link"><i class="iconfont reco-tag"></i>
  Tag
</a></div><div class="nav-item"><a href="/timeLine/" class="nav-link"><i class="iconfont reco-date"></i>
  TimeLine
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-message"></i>
      FriendLink
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://github.com/lotosv2010/" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont reco-github"></i>
  GitHub
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://www.cnblogs.com/lotosv2010/" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont reco-bokeyuan"></i>
  博客圆
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://www.yuque.com/lotosv2010" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont reco-document"></i>
  语雀
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask" data-v-7dd95ae2></div> <aside class="sidebar" data-v-7dd95ae2><div class="personal-info-wrapper" data-v-1fad0c41 data-v-7dd95ae2><img src="/head.jpg" alt="author-avatar" class="personal-img" data-v-1fad0c41> <h3 class="name" data-v-1fad0c41>
    Robin
  </h3> <div class="num" data-v-1fad0c41><div data-v-1fad0c41><h3 data-v-1fad0c41>49</h3> <h6 data-v-1fad0c41>Articles</h6></div> <div data-v-1fad0c41><h3 data-v-1fad0c41>14</h3> <h6 data-v-1fad0c41>Tags</h6></div></div> <ul class="social-links" data-v-1fad0c41></ul> <hr data-v-1fad0c41></div> <nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link"><i class="iconfont reco-home"></i>
  Home
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-category"></i>
      Category
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/categories/css系统梳理/" class="nav-link"><i class="undefined"></i>
  css系统梳理
</a></li><li class="dropdown-item"><!----> <a href="/categories/css响应式/" class="nav-link"><i class="undefined"></i>
  css响应式
</a></li><li class="dropdown-item"><!----> <a href="/categories/简历/" class="nav-link"><i class="undefined"></i>
  简历
</a></li><li class="dropdown-item"><!----> <a href="/categories/ES系统梳理/" class="nav-link"><i class="undefined"></i>
  ES系统梳理
</a></li><li class="dropdown-item"><!----> <a href="/categories/html5系统梳理/" class="nav-link"><i class="undefined"></i>
  html5系统梳理
</a></li><li class="dropdown-item"><!----> <a href="/categories/js基础/" class="nav-link"><i class="undefined"></i>
  js基础
</a></li><li class="dropdown-item"><!----> <a href="/categories/js面试题/" class="nav-link"><i class="undefined"></i>
  js面试题
</a></li><li class="dropdown-item"><!----> <a href="/categories/jquery源码分析/" class="nav-link"><i class="undefined"></i>
  jquery源码分析
</a></li><li class="dropdown-item"><!----> <a href="/categories/PMP考试每日一题/" class="nav-link"><i class="undefined"></i>
  PMP考试每日一题
</a></li><li class="dropdown-item"><!----> <a href="/categories/react源码分析/" class="nav-link"><i class="undefined"></i>
  react源码分析
</a></li><li class="dropdown-item"><!----> <a href="/categories/软考高级每日三题/" class="nav-link"><i class="undefined"></i>
  软考高级每日三题
</a></li><li class="dropdown-item"><!----> <a href="/categories/软考高级解锁打卡/" class="nav-link"><i class="undefined"></i>
  软考高级解锁打卡
</a></li><li class="dropdown-item"><!----> <a href="/categories/软考高级日历打卡/" class="nav-link"><i class="undefined"></i>
  软考高级日历打卡
</a></li><li class="dropdown-item"><!----> <a href="/categories/vue源码分析/" class="nav-link"><i class="undefined"></i>
  vue源码分析
</a></li><li class="dropdown-item"><!----> <a href="/categories/webpack前端工程化/" class="nav-link"><i class="undefined"></i>
  webpack前端工程化
</a></li><li class="dropdown-item"><!----> <a href="/categories/聚焦Vue、React、Webpack/" class="nav-link"><i class="undefined"></i>
  聚焦Vue、React、Webpack
</a></li></ul></div></div><div class="nav-item"><a href="/tag/" class="nav-link"><i class="iconfont reco-tag"></i>
  Tag
</a></div><div class="nav-item"><a href="/timeLine/" class="nav-link"><i class="iconfont reco-date"></i>
  TimeLine
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-message"></i>
      FriendLink
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://github.com/lotosv2010/" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont reco-github"></i>
  GitHub
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://www.cnblogs.com/lotosv2010/" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont reco-bokeyuan"></i>
  博客圆
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://www.yuque.com/lotosv2010" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont reco-document"></i>
  语雀
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div> <!----></nav> <!----> </aside> <div class="password-shadow password-wrapper-in" style="display:none;" data-v-59e6cb88 data-v-7dd95ae2><h3 class="title" data-v-59e6cb88>vue源码分析(十一) 编译之解析(parse)——parse</h3> <!----> <label id="box" class="inputBox" data-v-59e6cb88><input type="password" value="" data-v-59e6cb88> <span data-v-59e6cb88>Konck! Knock!</span> <button data-v-59e6cb88>OK</button></label> <div class="footer" data-v-59e6cb88><span data-v-59e6cb88><i class="iconfont reco-theme" data-v-59e6cb88></i> <a target="blank" href="https://vuepress-theme-reco.recoluan.com" data-v-59e6cb88>vuePress-theme-reco</a></span> <span data-v-59e6cb88><i class="iconfont reco-copyright" data-v-59e6cb88></i> <a data-v-59e6cb88><span data-v-59e6cb88>Robin</span>
          
        <span data-v-59e6cb88>2015 - </span>
        2023
      </a></span></div></div> <div data-v-7dd95ae2><div data-v-7dd95ae2><main class="page"><section style="display:;"><div class="page-title"><h1 class="title">vue源码分析(十一) 编译之解析(parse)——parse</h1> <div data-v-8a445198><i class="iconfont reco-account" data-v-8a445198><span data-v-8a445198>Robin</span></i> <i class="iconfont reco-date" data-v-8a445198><span data-v-8a445198>10/11/2018</span></i> <!----> <i class="tags iconfont reco-tag" data-v-8a445198><span class="tag-item" data-v-8a445198>vue</span><span class="tag-item" data-v-8a445198>源码分析</span><span class="tag-item" data-v-8a445198>面试</span></i></div></div> <div class="theme-reco-content content__default"><h2 id="_1-概述"><a href="#_1-概述" class="header-anchor">#</a> 1. 概述</h2> <p>​	分析完 <code>parseHTML</code> 我们再回到 <code>scr/compiler/parse/index.js</code> ，继续分析 <code>parse</code> 的源代码。</p> <p>​	分析 <code>parse</code> 源码，我们还是以 <a href="https://lotosv2010.github.io/view/vue/2018/10090800.html#_2-%E6%A1%88%E4%BE%8B" target="_blank" rel="noopener noreferrer">第九章<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 的案例代码为例进行，如下：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token operator">&lt;</span><span class="token operator">!</span><span class="token constant">DOCTYPE</span> html<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>html lang<span class="token operator">=</span><span class="token string">&quot;en&quot;</span><span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>head<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span>meta charset<span class="token operator">=</span><span class="token string">&quot;UTF-8&quot;</span><span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span>meta name<span class="token operator">=</span><span class="token string">&quot;viewport&quot;</span> content<span class="token operator">=</span><span class="token string">&quot;width=device-width, initial-scale=1.0&quot;</span><span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span>title<span class="token operator">&gt;</span>parse<span class="token operator">&lt;</span><span class="token operator">/</span>title<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span>script src<span class="token operator">=</span><span class="token string">&quot;./vue.js&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>head<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>body<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span>div id<span class="token operator">=</span><span class="token string">&quot;app&quot;</span><span class="token operator">&gt;</span><span class="token punctuation">{</span><span class="token punctuation">{</span> fullName <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>script<span class="token operator">&gt;</span>
      <span class="token keyword">new</span> <span class="token class-name">Vue</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        <span class="token literal-property property">el</span><span class="token operator">:</span> <span class="token string">'#app'</span><span class="token punctuation">,</span>
        <span class="token literal-property property">template</span><span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">
          &lt;ul :class=&quot;classObject&quot; class=&quot;list&quot; v-show=&quot;isShow&quot;&gt;
            &lt;li v-for=&quot;(l, i) in list&quot; :key=&quot;i&quot; @click=&quot;clickItem(index)&quot;&gt;{{ i }}:{{ l }}&lt;/li&gt;
          &lt;/ul&gt;
        </span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span>
        <span class="token literal-property property">data</span><span class="token operator">:</span> <span class="token punctuation">{</span>
          <span class="token literal-property property">isShow</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
          <span class="token literal-property property">list</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'Vue'</span><span class="token punctuation">,</span> <span class="token string">'React'</span><span class="token punctuation">,</span> <span class="token string">'Angular'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
          <span class="token literal-property property">classObject</span><span class="token operator">:</span> <span class="token punctuation">{</span>
            <span class="token literal-property property">active</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
            <span class="token string-property property">'text-danger'</span><span class="token operator">:</span> <span class="token boolean">false</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token literal-property property">methods</span><span class="token operator">:</span> <span class="token punctuation">{</span>
          <span class="token function">clickItem</span><span class="token punctuation">(</span><span class="token parameter">index</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>index<span class="token punctuation">)</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>body<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>html<span class="token operator">&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br></div></div><h2 id="_2-整体结构"><a href="#_2-整体结构" class="header-anchor">#</a> 2. 整体结构</h2> <p>​	在分析源码之前我们，先以为代码的方式梳理一下 <code>parse</code> 的整理结构，如下：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">createASTElement</span> <span class="token punctuation">(</span>
  <span class="token parameter"><span class="token literal-property property">tag</span><span class="token operator">:</span> string<span class="token punctuation">,</span>
  <span class="token literal-property property">attrs</span><span class="token operator">:</span> Array<span class="token operator">&lt;</span>Attr<span class="token operator">&gt;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">parent</span><span class="token operator">:</span> ASTElement <span class="token operator">|</span> <span class="token keyword">void</span></span>
<span class="token punctuation">)</span><span class="token operator">:</span> ASTElement <span class="token punctuation">{</span>
  <span class="token comment">/* 省略... */</span>
<span class="token punctuation">}</span>

<span class="token comment">// HTML字符串转换为AST</span>
<span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">parse</span> <span class="token punctuation">(</span>
  <span class="token parameter"><span class="token literal-property property">template</span><span class="token operator">:</span> string<span class="token punctuation">,</span>
  <span class="token literal-property property">options</span><span class="token operator">:</span> CompilerOptions</span>
<span class="token punctuation">)</span><span class="token operator">:</span> ASTElement <span class="token operator">|</span> <span class="token keyword">void</span> <span class="token punctuation">{</span>
  <span class="token comment">/*
   * 省略...
   * 省略的代码用来初始化一些变量的值，以及创建一些新的变量，其中包括 root 变量，该变量为 parse 函数的返回值，即 AST
   */</span>
  
  <span class="token comment">// 警告日志函数</span>
  <span class="token keyword">function</span> <span class="token function">warnOnce</span> <span class="token punctuation">(</span><span class="token parameter">msg<span class="token punctuation">,</span> range</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">/* 省略... */</span>
  <span class="token punctuation">}</span>

	<span class="token comment">// 关闭节点</span>
  <span class="token keyword">function</span> <span class="token function">closeElement</span> <span class="token punctuation">(</span><span class="token parameter">element</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">/* 省略... */</span>
  <span class="token punctuation">}</span>

	<span class="token comment">// 删除尾部空白节点</span>
	<span class="token keyword">function</span> <span class="token function">trimEndingWhitespace</span> <span class="token punctuation">(</span><span class="token parameter">el</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">/* 省略... */</span>
  <span class="token punctuation">}</span>

	<span class="token comment">// 校验根节点</span>
	<span class="token keyword">function</span> <span class="token function">checkRootConstraints</span> <span class="token punctuation">(</span><span class="token parameter">el</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">/* 省略... */</span>
  <span class="token punctuation">}</span>

  <span class="token function">parseHTML</span><span class="token punctuation">(</span>template<span class="token punctuation">,</span> <span class="token punctuation">{</span>
    <span class="token comment">// 其他选项...</span>
    <span class="token function">start</span> <span class="token punctuation">(</span><span class="token parameter">tag<span class="token punctuation">,</span> attrs<span class="token punctuation">,</span> unary<span class="token punctuation">,</span> start<span class="token punctuation">,</span> end</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">/* 省略... */</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>

    <span class="token function">end</span> <span class="token punctuation">(</span><span class="token parameter">tag<span class="token punctuation">,</span> start<span class="token punctuation">,</span> end</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">/* 省略... */</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>

    <span class="token function">chars</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token literal-property property">text</span><span class="token operator">:</span> string<span class="token punctuation">,</span> <span class="token literal-property property">start</span><span class="token operator">:</span> number<span class="token punctuation">,</span> <span class="token literal-property property">end</span><span class="token operator">:</span> number</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">/* 省略... */</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function">comment</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token literal-property property">text</span><span class="token operator">:</span> string<span class="token punctuation">,</span> start<span class="token punctuation">,</span> end</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">/* 省略... */</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token keyword">return</span> root
<span class="token punctuation">}</span>

<span class="token comment">// 处理 v-pre </span>
<span class="token keyword">function</span> <span class="token function">processPre</span> <span class="token punctuation">(</span><span class="token parameter">el</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token comment">/* 省略...*/</span><span class="token punctuation">}</span>
<span class="token keyword">function</span> <span class="token function">processRawAttrs</span> <span class="token punctuation">(</span><span class="token parameter">el</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token comment">/* 省略...*/</span><span class="token punctuation">}</span>
<span class="token comment">// 处理 element</span>
<span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">processElement</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token literal-property property">element</span><span class="token operator">:</span> ASTElement<span class="token punctuation">,</span> <span class="token literal-property property">options</span><span class="token operator">:</span> CompilerOptions</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token comment">/* 省略...*/</span><span class="token punctuation">}</span>
<span class="token comment">// 处理 v-key</span>
<span class="token keyword">function</span> <span class="token function">processKey</span> <span class="token punctuation">(</span><span class="token parameter">el</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token comment">/* 省略...*/</span><span class="token punctuation">}</span>
<span class="token comment">// 处理 ref</span>
<span class="token keyword">function</span> <span class="token function">processRef</span> <span class="token punctuation">(</span><span class="token parameter">el</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token comment">/* 省略...*/</span><span class="token punctuation">}</span>
<span class="token comment">// 处理 v-for</span>
<span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">processFor</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token literal-property property">el</span><span class="token operator">:</span> ASTElement</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token comment">/* 省略...*/</span><span class="token punctuation">}</span>
<span class="token comment">// 解析 v-for</span>
<span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">parseFor</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token literal-property property">exp</span><span class="token operator">:</span> string</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token operator">?</span>ForParseResult <span class="token punctuation">{</span><span class="token comment">/* 省略...*/</span><span class="token punctuation">}</span>
<span class="token comment">// 处理 v-if</span>
<span class="token keyword">function</span> <span class="token function">processIf</span> <span class="token punctuation">(</span><span class="token parameter">el</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token comment">/* 省略...*/</span><span class="token punctuation">}</span>
<span class="token comment">// 处理 if 条件</span>
<span class="token keyword">function</span> <span class="token function">processIfConditions</span> <span class="token punctuation">(</span><span class="token parameter">el<span class="token punctuation">,</span> parent</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token comment">/* 省略...*/</span><span class="token punctuation">}</span>
<span class="token comment">// 找到 v-pre 中的值</span>
<span class="token keyword">function</span> <span class="token function">findPrevElement</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token literal-property property">children</span><span class="token operator">:</span> Array<span class="token operator">&lt;</span>any<span class="token operator">&gt;</span></span><span class="token punctuation">)</span><span class="token operator">:</span> ASTElement <span class="token operator">|</span> <span class="token keyword">void</span> <span class="token punctuation">{</span><span class="token comment">/* 省略...*/</span><span class="token punctuation">}</span>
<span class="token comment">// v-if的条件数组添加</span>
<span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">addIfCondition</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token literal-property property">el</span><span class="token operator">:</span> ASTElement<span class="token punctuation">,</span> <span class="token literal-property property">condition</span><span class="token operator">:</span> ASTIfCondition</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token comment">/* 省略...*/</span><span class="token punctuation">}</span>
<span class="token comment">// 处理 v-once</span>
<span class="token keyword">function</span> <span class="token function">processOnce</span> <span class="token punctuation">(</span><span class="token parameter">el</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token comment">/* 省略...*/</span><span class="token punctuation">}</span>
<span class="token comment">// 处理 slot</span>
<span class="token keyword">function</span> <span class="token function">processSlotContent</span> <span class="token punctuation">(</span><span class="token parameter">el</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token comment">/* 省略...*/</span><span class="token punctuation">}</span>
<span class="token keyword">function</span> <span class="token function">getSlotName</span> <span class="token punctuation">(</span><span class="token parameter">binding</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token comment">/* 省略...*/</span><span class="token punctuation">}</span>
<span class="token keyword">function</span> <span class="token function">processSlotOutlet</span> <span class="token punctuation">(</span><span class="token parameter">el</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token comment">/* 省略...*/</span><span class="token punctuation">}</span>
<span class="token comment">// 处理 is 特性</span>
<span class="token keyword">function</span> <span class="token function">processComponent</span> <span class="token punctuation">(</span><span class="token parameter">el</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token comment">/* 省略...*/</span><span class="token punctuation">}</span>
<span class="token comment">// 处理 attrs 熟悉</span>
<span class="token keyword">function</span> <span class="token function">processAttrs</span> <span class="token punctuation">(</span><span class="token parameter">el</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token comment">/* 省略...*/</span><span class="token punctuation">}</span>
<span class="token comment">// 检查是否在 v-for中</span>
<span class="token keyword">function</span> <span class="token function">checkInFor</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token literal-property property">el</span><span class="token operator">:</span> ASTElement</span><span class="token punctuation">)</span><span class="token operator">:</span> boolean <span class="token punctuation">{</span><span class="token comment">/* 省略...*/</span><span class="token punctuation">}</span>
<span class="token keyword">function</span> <span class="token function">parseModifiers</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token literal-property property">name</span><span class="token operator">:</span> string</span><span class="token punctuation">)</span><span class="token operator">:</span> Object <span class="token operator">|</span> <span class="token keyword">void</span> <span class="token punctuation">{</span><span class="token comment">/* 省略...*/</span><span class="token punctuation">}</span>
<span class="token keyword">function</span> <span class="token function">makeAttrsMap</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token literal-property property">attrs</span><span class="token operator">:</span> Array<span class="token operator">&lt;</span>Object<span class="token operator">&gt;</span></span><span class="token punctuation">)</span><span class="token operator">:</span> Object <span class="token punctuation">{</span><span class="token comment">/* 省略...*/</span><span class="token punctuation">}</span>
<span class="token comment">// 是否是 text 标签，即script,style标签，不会解析</span>
<span class="token keyword">function</span> <span class="token function">isTextTag</span> <span class="token punctuation">(</span><span class="token parameter">el</span><span class="token punctuation">)</span><span class="token operator">:</span> boolean <span class="token punctuation">{</span><span class="token comment">/* 省略...*/</span><span class="token punctuation">}</span>
<span class="token comment">// 是否是禁用标签</span>
<span class="token keyword">function</span> <span class="token function">isForbiddenTag</span> <span class="token punctuation">(</span><span class="token parameter">el</span><span class="token punctuation">)</span><span class="token operator">:</span> boolean <span class="token punctuation">{</span><span class="token comment">/* 省略...*/</span><span class="token punctuation">}</span>
<span class="token comment">// 修复ie svg的bug</span>
<span class="token keyword">function</span> <span class="token function">guardIESVGBug</span> <span class="token punctuation">(</span><span class="token parameter">attrs</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token comment">/* 省略...*/</span><span class="token punctuation">}</span>
<span class="token comment">// 检查v-model在for循环中的绑定的检查</span>
<span class="token keyword">function</span> <span class="token function">checkForAliasModel</span> <span class="token punctuation">(</span><span class="token parameter">el<span class="token punctuation">,</span> value</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token comment">/* 省略...*/</span><span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br><span class="line-number">81</span><br><span class="line-number">82</span><br><span class="line-number">83</span><br><span class="line-number">84</span><br><span class="line-number">85</span><br><span class="line-number">86</span><br><span class="line-number">87</span><br><span class="line-number">88</span><br><span class="line-number">89</span><br><span class="line-number">90</span><br><span class="line-number">91</span><br><span class="line-number">92</span><br><span class="line-number">93</span><br><span class="line-number">94</span><br><span class="line-number">95</span><br><span class="line-number">96</span><br><span class="line-number">97</span><br><span class="line-number">98</span><br><span class="line-number">99</span><br><span class="line-number">100</span><br><span class="line-number">101</span><br></div></div><p>​	分析完 <code>src/compiler/parser/index.js</code> 文件的整体结构。接下来我们回过头来，从文件的开始部分来分析。</p> <h2 id="_3-正则常量分析"><a href="#_3-正则常量分析" class="header-anchor">#</a> 3. 正则常量分析</h2> <p>​	下面我们逐一分析一下这一系列常量。</p> <h3 id="_3-1-onre"><a href="#_3-1-onre" class="header-anchor">#</a> 3.1 onRE</h3> <p>​	源码目录：<code>src/compiler/parser/index.js</code></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">export</span> <span class="token keyword">const</span> onRE <span class="token operator">=</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">^@|^v-on:</span><span class="token regex-delimiter">/</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>​	这个常量用来匹配以字符 <code>@</code> 或 <code>v-on:</code> 开头的字符串，主要作用是检测标签属性名是否是监听事件的指令。</p> <h3 id="_3-2-dirre"><a href="#_3-2-dirre" class="header-anchor">#</a> 3.2 dirRE</h3> <p>​	源码目录：<code>src/compiler/parser/index.js</code></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">export</span> <span class="token keyword">const</span> dirRE <span class="token operator">=</span> process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">VBIND_PROP_SHORTHAND</span>
  <span class="token operator">?</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">^v-|^@|^:|^\.|^#</span><span class="token regex-delimiter">/</span></span>
  <span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">^v-|^@|^:|^#</span><span class="token regex-delimiter">/</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>​	它用来匹配以字符 <code>v-</code> 或 <code>@</code> 或 <code>:</code> 或 <code>.</code> 或 <code>#</code> 开头的字符串，主要作用是检测标签属性名是否是指令。所以通过这个正则我们可以知道，在 <code>vue</code> 中所有以 <code>v-</code> 开头的属性都被认为是指令，另外 <code>@</code> 字符是 <code>v-on</code> 的缩写，<code>:</code> 字符是 <code>v-bind</code> 的缩写。</p> <h3 id="_3-3-foraliasre"><a href="#_3-3-foraliasre" class="header-anchor">#</a> 3.3 forAliasRE</h3> <p>​	源码目录：<code>src/compiler/parser/index.js</code></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">export</span> <span class="token keyword">const</span> forAliasRE <span class="token operator">=</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">([\s\S]*?)\s+(?:in|of)\s+([\s\S]*)</span><span class="token regex-delimiter">/</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>​	该正则包含三个分组，</p> <ul><li>第一个分组为 <code>([\s\S]*?)</code>，该分组是一个惰性匹配的分组，<code>\s</code> 空白符 <code>\S</code> 非空白符，即它匹配的内容为任何字符，包括换行符等。</li> <li>第二个分组为 <code>(?:in|of)</code>，该分组用来匹配字符串 <code>in</code> 或者 <code>of</code>，并且该分组是非捕获的分组。</li> <li>第三个分组为 <code>([\s\S]*)</code>，与第一个分组类似，不同的是第三个分组是非惰性匹配。</li></ul> <p>​	同时每个分组之间都会匹配至少一个空白符 <code>\s+</code>。通过以上说明可知，正则 <code>forAliasRE</code> 用来匹配 <code>v-for</code> 属性的值，并捕获 <code>in</code> 或 <code>of</code> 前后的字符串。假设我们像如下这样使用 <code>v-for</code>：<code>&lt;div v-for=&quot;obj of list&quot;&gt;&lt;/div&gt;</code> ，那么正则 <code>forAliasRE</code> 用来匹配字符串 <code>'obj of list'</code>，并捕获到两个字符串 <code>'obj'</code> 和 <code>'list'</code>。</p> <h3 id="_3-4-foriteratorre"><a href="#_3-4-foriteratorre" class="header-anchor">#</a> 3.4 forIteratorRE</h3> <p>​	源码目录：<code>src/compiler/parser/index.js</code>'</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">export</span> <span class="token keyword">const</span> forIteratorRE <span class="token operator">=</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">,([^,\}\]]*)(?:,([^,\}\]]*))?$</span><span class="token regex-delimiter">/</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>​	该正则用来匹配 <code>forAliasRE</code> 包含两个分组:</p> <ul><li>第一个捕获组用来捕获一个不包含字符 <code>,``}</code> 和 <code>]</code> 的字符串，且该字符串前面有一个字符 <code>,</code>，如：<code>', index'</code>。</li> <li>第二个分组为非捕获的分组，第三个分组为捕获的分组，其捕获的内容与第一个捕获组相同。</li></ul> <p>​	举几个例子，我们知道 <code>v-for</code> 有几种不同的写法，其中一种使用 <code>v-for</code> 的方式是：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token operator">&lt;</span>div v<span class="token operator">-</span><span class="token keyword">for</span><span class="token operator">=</span><span class="token string">&quot;obj of list&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>​	如果像如上这样使用 <code>v-for</code>，那么 <code>forAliasRE</code> 正则的第一个捕获组的内容为字符串 <code>'obj'</code>，此时使用 <code>forIteratorRE</code> 正则去匹配字符串 <code>'obj'</code> 将得不到任何内容。</p> <p>​	第二种使用 <code>v-for</code> 的方式为：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token operator">&lt;</span>div v<span class="token operator">-</span><span class="token keyword">for</span><span class="token operator">=</span><span class="token string">&quot;(obj, index) of list&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>​	此时 <code>forAliasRE</code> 正则的第一个捕获组的内容为字符串 <code>'(obj, index)'</code>，如果去掉左右括号则该字符串为 <code>'obj, index'</code>，如果使用 <code>forIteratorRE</code> 正则去匹配字符串 <code>'obj, index'</code> 则会匹配成功，并且 <code>forIteratorRE</code> 正则的第一个捕获组将捕获到字符串 <code>'index'</code>，但第二个捕获组捕获不到任何内容。</p> <p>​	第三种使用 <code>v-for</code> 的方式为：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token operator">&lt;</span>div v<span class="token operator">-</span><span class="token keyword">for</span><span class="token operator">=</span><span class="token string">&quot;(value, key, index) in object&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>​	以上方式主要用于遍历对象而非数组，此时 <code>forAliasRE</code> 正则的第一个捕获组的内容为字符串 <code>'(value, key, index)'</code>，如果去掉左右括号则该字符串为 <code>'value, key, index'</code>，如果使用 <code>forIteratorRE</code> 正则去匹配字符串 <code>'value, key, index'</code> 则会匹配成功，并且 <code>forIteratorRE</code> 正则的第一个捕获组将捕获到字符串 <code>'key'</code>，但第二个捕获组将捕获到字符串 <code>'index'</code>。</p> <h3 id="_3-5-stripparensre"><a href="#_3-5-stripparensre" class="header-anchor">#</a> 3.5 stripParensRE</h3> <p>​	源码目录：<code>src/compiler/parser/index.js</code></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> stripParensRE <span class="token operator">=</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">^\(|\)$</span><span class="token regex-delimiter">/</span><span class="token regex-flags">g</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>​	用来匹配要么以字符 <code>(</code> 开头，要么以字符 <code>)</code> 结尾的字符串，或者两者都满足。例如在 <code>v-for</code> 中去除括号。</p> <h3 id="_3-6-dynamicargre"><a href="#_3-6-dynamicargre" class="header-anchor">#</a> 3.6 dynamicArgRE</h3> <p>​	源码目录：<code>src/compiler/parser/index.js</code></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> dynamicArgRE <span class="token operator">=</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">^\[.*\]$</span><span class="token regex-delimiter">/</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>​	用来匹配以字符 <code>[</code> 开头并以字符 <code>]</code> 结尾的字符串，作用是判断是否为动态属性。</p> <div class="custom-block tip"><p class="title"></p><p><code>.</code> ：匹配除换行符 <code>\n</code> 之外的任何单字符。要匹配 <code>.</code> ，请使用 <code>\.</code> 。</p> <p><code>*</code> ：匹配前面的子表达式零次或多次。要匹配 <code>*</code> ，请使用 <code>\*</code> 。</p></div><h3 id="_3-7-argre"><a href="#_3-7-argre" class="header-anchor">#</a> 3.7 argRE</h3> <p>​	源码目录：<code>src/compiler/parser/index.js</code></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> argRE <span class="token operator">=</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">:(.*)$</span><span class="token regex-delimiter">/</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>​	正则 <code>argRE</code> 用来匹配指令中的参数，如下：</p> <div class="language-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name"><span class="token namespace">v-on:</span>click.stop</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>handleClick<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>​	其中 <code>v-on</code> 为指令，<code>click</code> 为传递给 <code>v-on</code> 指令的参数，<code>stop</code> 为修饰符。所以 <code>argRE</code> 正则用来匹配指令编写中的参数，并且拥有一个捕获组，用来捕获参数的名字。</p> <h3 id="_3-8-bindre"><a href="#_3-8-bindre" class="header-anchor">#</a> 3.8 bindRE</h3> <p>​	源码目录：<code>src/compiler/parser/index.js</code></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">export</span> <span class="token keyword">const</span> bindRE <span class="token operator">=</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">^:|^\.|^v-bind:</span><span class="token regex-delimiter">/</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>​	该正则用来匹配以字符 <code>:</code> 或字符串 <code>v-bind:</code> 或字符串 <code>.</code> 开头的字符串，主要用来检测一个标签的属性是否是绑定(<code>v-bind</code>)。</p> <h3 id="_3-9-propbindre"><a href="#_3-9-propbindre" class="header-anchor">#</a> 3.9 propBindRE</h3> <p>​	源码目录：<code>src/compiler/parser/index.js</code></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> propBindRE <span class="token operator">=</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">^\.</span><span class="token regex-delimiter">/</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>​	该正则用来匹配以符串 <code>.</code> 开头的字符串，主要用来检测一个(<code>v-bind</code>)指令是否绑定修饰符(<code>.prop</code>)。</p> <div class="custom-block tip"><p class="title"></p><p>说明：关于 <code>.prop</code> 请参考  <a href="https://cn.vuejs.org/v2/api/#v-bind" target="_blank" rel="noopener noreferrer">v-bind<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 。</p></div><h3 id="_3-10-modifierre"><a href="#_3-10-modifierre" class="header-anchor">#</a> 3.10 modifierRE</h3> <p>​	源码目录：<code>src/compiler/parser/index.js</code></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> modifierRE <span class="token operator">=</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.[^.\]]+(?=[^\]]*$)</span><span class="token regex-delimiter">/</span><span class="token regex-flags">g</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>​	用来匹配以字符 (<code>v-bind</code>)指令是否绑定修饰符，并且捕获匹配到的字符串，如下例子：</p> <div class="language-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>svg</span> <span class="token attr-name">:view-box.camel</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>viewBox<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>svg</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>​	在代码中经过其他过滤，用来匹配此正则表达式的字符串为 <code>:view-box.camel</code>，所以最终匹配到的是 <code>.camel</code>。</p> <h3 id="_3-11-slotre"><a href="#_3-11-slotre" class="header-anchor">#</a> 3.11 slotRE</h3> <p>​	源码目录：<code>src/compiler/parser/index.js</code></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> slotRE <span class="token operator">=</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">^v-slot(:|$)|^#</span><span class="token regex-delimiter">/</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>​	用来匹配以字符 (<code>v-slot</code>) 或 字符 <code>#</code> 开头的字符串，并且捕获匹配到的字符串中的 <code>:</code> 字符。</p> <h3 id="_3-12-linebreakre"><a href="#_3-12-linebreakre" class="header-anchor">#</a> 3.12 lineBreakRE</h3> <p>​	源码目录：<code>src/compiler/parser/index.js</code></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> lineBreakRE <span class="token operator">=</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">[\r\n]</span><span class="token regex-delimiter">/</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>​	匹配换行符和回车符。</p> <h3 id="_3-13-whitespacere"><a href="#_3-13-whitespacere" class="header-anchor">#</a> 3.13 whitespaceRE</h3> <p>​	源码目录：<code>src/compiler/parser/index.js</code></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> whitespaceRE <span class="token operator">=</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\s+</span><span class="token regex-delimiter">/</span><span class="token regex-flags">g</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>​	匹配任何空白字符一次或多次，包括空格、制表符、换页符等等。等价于 <code>[ \f\n\r\t\v]</code>。注意<code>Unicode</code> 正则表达式会匹配全角空格符。</p> <h3 id="_3-14-invalidattributere"><a href="#_3-14-invalidattributere" class="header-anchor">#</a> 3.14 invalidAttributeRE</h3> <p>​	源码目录：<code>src/compiler/parser/index.js</code></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> invalidAttributeRE <span class="token operator">=</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">[\s&quot;'&lt;&gt;\/=]</span><span class="token regex-delimiter">/</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>​	匹配 空白 或 <code>&quot;</code> 或 <code>'</code> 或 <code>&lt;</code> 或 <code>&gt;</code> 或 <code>/</code> 或 <code>=</code>字符。</p> <h3 id="_3-15-解码函数"><a href="#_3-15-解码函数" class="header-anchor">#</a> 3.15 解码函数</h3> <p>​	源码目录：<code>src/compiler/parser/index.js</code></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> decodeHTMLCached <span class="token operator">=</span> <span class="token function">cached</span><span class="token punctuation">(</span>he<span class="token punctuation">.</span>decode<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>​	<code>cached</code> 作用是接收一个函数作为参数并返回一个新的函数，新函数的功能与作为参数传递的函数功能相同，唯一不同的是新函数具有缓存值的功能，如果一个函数在接收相同参数的情况下所返回的值总是相同的，那么 <code>cached</code> 函数将会为该函数提供性能提升的优势。</p> <p>​	可以看到传递给 <code>cached</code> 函数的参数是 <code>he.decode</code> 函数，其中 <code>he</code> 为第三方的库，<code>he.decode</code> 函数用于 <code>HTML</code> 字符实体的解码工作，如：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>he<span class="token punctuation">.</span><span class="token function">decode</span><span class="token punctuation">(</span><span class="token string">'&amp;#x26;'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>  <span class="token comment">// &amp;#x26; -&gt; '&amp;'</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>​	由于字符实体 <code>&amp;</code> 代表的字符为 <code>&amp;</code>。所以字符串 <code>&amp;</code> 经过解码后将变为字符 <code>&amp;</code>。<code>decodeHTMLCached</code> 函数在后面将被用于对纯文本的解码，如果不进行解码，那么用户将无法使用字符实体编写字符。</p> <h3 id="_3-16-平台化选项变量"><a href="#_3-16-平台化选项变量" class="header-anchor">#</a> 3.16 平台化选项变量</h3> <p>​	源码目录：<code>src/compiler/parser/index.js</code></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// configurable state</span>
<span class="token comment">// 日志输出函数</span>
<span class="token keyword">export</span> <span class="token keyword">let</span> <span class="token literal-property property">warn</span><span class="token operator">:</span> any
<span class="token comment">// 改变纯文本插入分隔符。修改指令的书写风格，比如默认是{{mgs}}  delimiters: ['${', '}']之后变成这样 ${mgs}</span>
<span class="token keyword">let</span> delimiters
<span class="token comment">// transforms 样式属性的集合函数</span>
<span class="token keyword">let</span> transforms
<span class="token comment">// transforms  arr属性的集合 函数</span>
<span class="token keyword">let</span> preTransforms
<span class="token comment">// 空数组 </span>
<span class="token keyword">let</span> postTransforms
<span class="token comment">//  判断标签是否是pre 如果是则返回真</span>
<span class="token keyword">let</span> platformIsPreTag
<span class="token comment">//  来检测一个属性在标签中是否要使用元素对象原生的 prop 进行绑定</span>
<span class="token keyword">let</span> platformMustUseProp
<span class="token comment">// 来获取元素(标签)的命名空间，即判断 tag 是否是svg或者math 标签</span>
<span class="token keyword">let</span> platformGetTagNamespace
<span class="token comment">// 判断是组件</span>
<span class="token keyword">let</span> maybeComponent
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><h2 id="_4-createastelement-函数"><a href="#_4-createastelement-函数" class="header-anchor">#</a> 4. createASTElement 函数</h2> <p>​	<code>createASTElement</code> 函数的作用就是方便我们创建一个节点，或者说方便我们创建一个元素的描述对象，如下：</p> <p>​	源码目录：<code>src/compiler/parser/index.js</code></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">createASTElement</span> <span class="token punctuation">(</span>
  <span class="token parameter"><span class="token literal-property property">tag</span><span class="token operator">:</span> string<span class="token punctuation">,</span>
  <span class="token literal-property property">attrs</span><span class="token operator">:</span> Array<span class="token operator">&lt;</span>ASTAttr<span class="token operator">&gt;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">parent</span><span class="token operator">:</span> ASTElement <span class="token operator">|</span> <span class="token keyword">void</span></span>
<span class="token punctuation">)</span><span class="token operator">:</span> ASTElement <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
    tag<span class="token punctuation">,</span>
    <span class="token literal-property property">attrsList</span><span class="token operator">:</span> attrs<span class="token punctuation">,</span>
    <span class="token literal-property property">attrsMap</span><span class="token operator">:</span> <span class="token function">makeAttrsMap</span><span class="token punctuation">(</span>attrs<span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token literal-property property">rawAttrsMap</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    parent<span class="token punctuation">,</span>
    <span class="token literal-property property">children</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><p>​	此函数接收三个参数，我们以<strong>概述</strong>里面的案例来分别是讲解，如下：</p> <ul><li><code>tag</code>：标签名字 <code>tag</code>，如  <code>ul</code>。</li> <li><code>attrs</code>：标签拥有的属性数组， 如 <code>[{name: ':class', value: 'classObject'}, {name: 'class', value: 'list'}, {name: 'v-show', value: 'isShow'}]</code>。</li> <li><code>parent</code>：标签的父标签描述对象。</li></ul> <p>​	返回一个对象，其中 <code>attrsMap</code> 是通过调用 <code>makeAttrsMap(attrs)</code> 函数得到的，下面我们看一下 <code>makeAttrsMap</code> 的源码，如下：</p> <p>​	源码目录：<code>src/compiler/parser/index.js</code></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">makeAttrsMap</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token literal-property property">attrs</span><span class="token operator">:</span> Array<span class="token operator">&lt;</span>Object<span class="token operator">&gt;</span></span><span class="token punctuation">)</span><span class="token operator">:</span> Object <span class="token punctuation">{</span>
  <span class="token keyword">const</span> map <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> l <span class="token operator">=</span> attrs<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i <span class="token operator">&lt;</span> l<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>
      process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">NODE_ENV</span> <span class="token operator">!==</span> <span class="token string">'production'</span> <span class="token operator">&amp;&amp;</span>
      map<span class="token punctuation">[</span>attrs<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>name<span class="token punctuation">]</span> <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span>isIE <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span>isEdge
    <span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token function">warn</span><span class="token punctuation">(</span><span class="token string">'duplicate attribute: '</span> <span class="token operator">+</span> attrs<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>name<span class="token punctuation">,</span> attrs<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    map<span class="token punctuation">[</span>attrs<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>name<span class="token punctuation">]</span> <span class="token operator">=</span> attrs<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>value
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> map
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><p>​	可以看出 <code>makeAttrsMap</code> 函数的作用就是通过循环属性数组将标签的属性数组转换成健值对。例如：<code>[{name: ':class', value: 'classObject'}, {name: 'class', value: 'list'}, {name: 'v-show', value: 'isShow'}]</code> 这个属性数组最终经过 <code>makeAttrsMap</code> 函数转换为：<code>{':class': 'classObject', 'class': 'list', 'v-show': 'isShow'}</code></p> <p>​	我们还是以<strong>概述</strong>里面的案例来分析，通过 <code>createASTElement</code> 函数生成最终对象的结构。</p> <div class="language-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ul</span> <span class="token attr-name">:class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>classObject<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>list<span class="token punctuation">&quot;</span></span> <span class="token attr-name">v-show</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>isShow<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span> <span class="token attr-name">v-for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>(l, i) in list<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:key</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>i<span class="token punctuation">&quot;</span></span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>clickItem(index)<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>{{ i }}:{{ l }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ul</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><ul><li>其中 <code>ul</code> 节点转换后的值如下：</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token punctuation">{</span>
  <span class="token string-property property">&quot;type&quot;</span><span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">,</span>
   <span class="token string-property property">&quot;tag&quot;</span><span class="token operator">:</span><span class="token string">&quot;ul&quot;</span><span class="token punctuation">,</span>
   <span class="token string-property property">&quot;attrsList&quot;</span><span class="token operator">:</span><span class="token punctuation">[</span>
     <span class="token punctuation">{</span>
       <span class="token string-property property">&quot;name&quot;</span><span class="token operator">:</span><span class="token string">&quot;:class&quot;</span><span class="token punctuation">,</span>
       <span class="token string-property property">&quot;value&quot;</span><span class="token operator">:</span><span class="token string">&quot;classObject&quot;</span><span class="token punctuation">,</span>
       <span class="token string-property property">&quot;start&quot;</span><span class="token operator">:</span><span class="token number">4</span><span class="token punctuation">,</span>
       <span class="token string-property property">&quot;end&quot;</span><span class="token operator">:</span><span class="token number">24</span>
     <span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{</span>
       <span class="token string-property property">&quot;name&quot;</span><span class="token operator">:</span><span class="token string">&quot;class&quot;</span><span class="token punctuation">,</span>
       <span class="token string-property property">&quot;value&quot;</span><span class="token operator">:</span><span class="token string">&quot;list&quot;</span><span class="token punctuation">,</span>
       <span class="token string-property property">&quot;start&quot;</span><span class="token operator">:</span><span class="token number">25</span><span class="token punctuation">,</span>
       <span class="token string-property property">&quot;end&quot;</span><span class="token operator">:</span><span class="token number">37</span>
     <span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{</span>
       <span class="token string-property property">&quot;name&quot;</span><span class="token operator">:</span><span class="token string">&quot;v-show&quot;</span><span class="token punctuation">,</span>
       <span class="token string-property property">&quot;value&quot;</span><span class="token operator">:</span><span class="token string">&quot;isShow&quot;</span><span class="token punctuation">,</span>
       <span class="token string-property property">&quot;start&quot;</span><span class="token operator">:</span><span class="token number">38</span><span class="token punctuation">,</span>
       <span class="token string-property property">&quot;end&quot;</span><span class="token operator">:</span><span class="token number">53</span>
     <span class="token punctuation">}</span>
   <span class="token punctuation">]</span><span class="token punctuation">,</span>
   <span class="token string-property property">&quot;attrsMap&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span>
     <span class="token string-property property">&quot;:class&quot;</span><span class="token operator">:</span><span class="token string">&quot;classObject&quot;</span><span class="token punctuation">,</span>
     <span class="token string-property property">&quot;class&quot;</span><span class="token operator">:</span><span class="token string">&quot;list&quot;</span><span class="token punctuation">,</span>
     <span class="token string-property property">&quot;v-show&quot;</span><span class="token operator">:</span><span class="token string">&quot;isShow&quot;</span>
   <span class="token punctuation">}</span><span class="token punctuation">,</span>
   <span class="token string-property property">&quot;rawAttrsMap&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
   <span class="token string-property property">&quot;children&quot;</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br></div></div><ul><li>其中 <code>li</code> 节点转换后的值如下：</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token punctuation">{</span>
  <span class="token string-property property">&quot;type&quot;</span><span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">,</span>
  <span class="token string-property property">&quot;tag&quot;</span><span class="token operator">:</span><span class="token string">&quot;li&quot;</span><span class="token punctuation">,</span>
  <span class="token string-property property">&quot;attrsList&quot;</span><span class="token operator">:</span><span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
      <span class="token string-property property">&quot;name&quot;</span><span class="token operator">:</span><span class="token string">&quot;v-for&quot;</span><span class="token punctuation">,</span>
      <span class="token string-property property">&quot;value&quot;</span><span class="token operator">:</span><span class="token string">&quot;(l, i) in list&quot;</span><span class="token punctuation">,</span>
      <span class="token string-property property">&quot;start&quot;</span><span class="token operator">:</span><span class="token number">71</span><span class="token punctuation">,</span>
      <span class="token string-property property">&quot;end&quot;</span><span class="token operator">:</span><span class="token number">93</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{</span>
      <span class="token string-property property">&quot;name&quot;</span><span class="token operator">:</span><span class="token string">&quot;:key&quot;</span><span class="token punctuation">,</span>
      <span class="token string-property property">&quot;value&quot;</span><span class="token operator">:</span><span class="token string">&quot;i&quot;</span><span class="token punctuation">,</span>
      <span class="token string-property property">&quot;start&quot;</span><span class="token operator">:</span><span class="token number">94</span><span class="token punctuation">,</span>
      <span class="token string-property property">&quot;end&quot;</span><span class="token operator">:</span><span class="token number">102</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{</span>
      <span class="token string-property property">&quot;name&quot;</span><span class="token operator">:</span><span class="token string">&quot;@click&quot;</span><span class="token punctuation">,</span>
      <span class="token string-property property">&quot;value&quot;</span><span class="token operator">:</span><span class="token string">&quot;clickItem(index)&quot;</span><span class="token punctuation">,</span>
      <span class="token string-property property">&quot;start&quot;</span><span class="token operator">:</span><span class="token number">103</span><span class="token punctuation">,</span>
      <span class="token string-property property">&quot;end&quot;</span><span class="token operator">:</span><span class="token number">128</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token string-property property">&quot;attrsMap&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span>
    <span class="token string-property property">&quot;v-for&quot;</span><span class="token operator">:</span><span class="token string">&quot;(l, i) in list&quot;</span><span class="token punctuation">,</span>
    <span class="token string-property property">&quot;:key&quot;</span><span class="token operator">:</span><span class="token string">&quot;i&quot;</span><span class="token punctuation">,</span>
    <span class="token string-property property">&quot;@click&quot;</span><span class="token operator">:</span><span class="token string">&quot;clickItem(index)&quot;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token string-property property">&quot;rawAttrsMap&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token string-property property">&quot;parent&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span>
     <span class="token string-property property">&quot;type&quot;</span><span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">,</span>
     <span class="token string-property property">&quot;tag&quot;</span><span class="token operator">:</span><span class="token string">&quot;ul&quot;</span><span class="token punctuation">,</span>
     <span class="token string-property property">&quot;attrsList&quot;</span><span class="token operator">:</span><span class="token punctuation">[</span>
       <span class="token punctuation">{</span>
         <span class="token string-property property">&quot;name&quot;</span><span class="token operator">:</span><span class="token string">&quot;:class&quot;</span><span class="token punctuation">,</span>
         <span class="token string-property property">&quot;value&quot;</span><span class="token operator">:</span><span class="token string">&quot;classObject&quot;</span><span class="token punctuation">,</span>
         <span class="token string-property property">&quot;start&quot;</span><span class="token operator">:</span><span class="token number">4</span><span class="token punctuation">,</span>
         <span class="token string-property property">&quot;end&quot;</span><span class="token operator">:</span><span class="token number">24</span>
       <span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{</span>
         <span class="token string-property property">&quot;name&quot;</span><span class="token operator">:</span><span class="token string">&quot;class&quot;</span><span class="token punctuation">,</span>
         <span class="token string-property property">&quot;value&quot;</span><span class="token operator">:</span><span class="token string">&quot;list&quot;</span><span class="token punctuation">,</span>
         <span class="token string-property property">&quot;start&quot;</span><span class="token operator">:</span><span class="token number">25</span><span class="token punctuation">,</span>
         <span class="token string-property property">&quot;end&quot;</span><span class="token operator">:</span><span class="token number">37</span>
       <span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{</span>
         <span class="token string-property property">&quot;name&quot;</span><span class="token operator">:</span><span class="token string">&quot;v-show&quot;</span><span class="token punctuation">,</span>
         <span class="token string-property property">&quot;value&quot;</span><span class="token operator">:</span><span class="token string">&quot;isShow&quot;</span><span class="token punctuation">,</span>
         <span class="token string-property property">&quot;start&quot;</span><span class="token operator">:</span><span class="token number">38</span><span class="token punctuation">,</span>
         <span class="token string-property property">&quot;end&quot;</span><span class="token operator">:</span><span class="token number">53</span>
       <span class="token punctuation">}</span>
     <span class="token punctuation">]</span><span class="token punctuation">,</span>
     <span class="token string-property property">&quot;attrsMap&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span>
       <span class="token string-property property">&quot;:class&quot;</span><span class="token operator">:</span><span class="token string">&quot;classObject&quot;</span><span class="token punctuation">,</span>
       <span class="token string-property property">&quot;class&quot;</span><span class="token operator">:</span><span class="token string">&quot;list&quot;</span><span class="token punctuation">,</span>
       <span class="token string-property property">&quot;v-show&quot;</span><span class="token operator">:</span><span class="token string">&quot;isShow&quot;</span>
     <span class="token punctuation">}</span><span class="token punctuation">,</span>
     <span class="token string-property property">&quot;rawAttrsMap&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
     <span class="token string-property property">&quot;children&quot;</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token punctuation">]</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token string-property property">&quot;children&quot;</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br></div></div><h2 id="_5-parse"><a href="#_5-parse" class="header-anchor">#</a> 5. <code>parse</code></h2> <p>​	在分析 <code>parse</code> 之前我们先整理一下 <code>parse</code> 的整体结构，如下：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">parse</span> <span class="token punctuation">(</span>
  <span class="token parameter"><span class="token literal-property property">template</span><span class="token operator">:</span> string<span class="token punctuation">,</span>
  <span class="token literal-property property">options</span><span class="token operator">:</span> CompilerOptions</span>
<span class="token punctuation">)</span><span class="token operator">:</span> ASTElement <span class="token operator">|</span> <span class="token keyword">void</span> <span class="token punctuation">{</span>
  <span class="token comment">// 平台化选项变量</span>
  
  <span class="token comment">// 其他变量</span>
  
  <span class="token comment">// 警告日志函数</span>
  <span class="token keyword">function</span> <span class="token function">warnOnce</span> <span class="token punctuation">(</span><span class="token parameter">msg<span class="token punctuation">,</span> range</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">/* 省略... */</span>
  <span class="token punctuation">}</span>

	<span class="token comment">// 关闭节点</span>
  <span class="token keyword">function</span> <span class="token function">closeElement</span> <span class="token punctuation">(</span><span class="token parameter">element</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">/* 省略... */</span>
  <span class="token punctuation">}</span>

	<span class="token comment">// 删除尾部空白节点</span>
	<span class="token keyword">function</span> <span class="token function">trimEndingWhitespace</span> <span class="token punctuation">(</span><span class="token parameter">el</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">/* 省略... */</span>
  <span class="token punctuation">}</span>

	<span class="token comment">// 校验根节点</span>
	<span class="token keyword">function</span> <span class="token function">checkRootConstraints</span> <span class="token punctuation">(</span><span class="token parameter">el</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">/* 省略... */</span>
  <span class="token punctuation">}</span>

  <span class="token function">parseHTML</span><span class="token punctuation">(</span>template<span class="token punctuation">,</span> <span class="token punctuation">{</span>
    <span class="token comment">// 其他选项...</span>
    <span class="token function">start</span> <span class="token punctuation">(</span><span class="token parameter">tag<span class="token punctuation">,</span> attrs<span class="token punctuation">,</span> unary<span class="token punctuation">,</span> start<span class="token punctuation">,</span> end</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">/* 省略... */</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>

    <span class="token function">end</span> <span class="token punctuation">(</span><span class="token parameter">tag<span class="token punctuation">,</span> start<span class="token punctuation">,</span> end</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">/* 省略... */</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>

    <span class="token function">chars</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token literal-property property">text</span><span class="token operator">:</span> string<span class="token punctuation">,</span> <span class="token literal-property property">start</span><span class="token operator">:</span> number<span class="token punctuation">,</span> <span class="token literal-property property">end</span><span class="token operator">:</span> number</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">/* 省略... */</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function">comment</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token literal-property property">text</span><span class="token operator">:</span> string<span class="token punctuation">,</span> start<span class="token punctuation">,</span> end</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">/* 省略... */</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token keyword">return</span> root
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br></div></div><h3 id="_5-1-变量"><a href="#_5-1-变量" class="header-anchor">#</a> 5.1 变量</h3> <p>​	在分析标签处理之前我们先看一下一些变量的作用，如下：</p> <p>​	源码目录：<code>src/compiler/parser/index.js</code></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 平台化选项</span>
warn <span class="token operator">=</span> options<span class="token punctuation">.</span>warn <span class="token operator">||</span> baseWarn 
platformIsPreTag <span class="token operator">=</span> options<span class="token punctuation">.</span>isPreTag <span class="token operator">||</span> no <span class="token operator">/</span>
platformMustUseProp <span class="token operator">=</span> options<span class="token punctuation">.</span>mustUseProp <span class="token operator">||</span> no
platformGetTagNamespace <span class="token operator">=</span> options<span class="token punctuation">.</span>getTagNamespace <span class="token operator">||</span> no
<span class="token keyword">const</span> isReservedTag <span class="token operator">=</span> options<span class="token punctuation">.</span>isReservedTag <span class="token operator">||</span> no
<span class="token function-variable function">maybeComponent</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token literal-property property">el</span><span class="token operator">:</span> ASTElement</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token operator">!</span><span class="token operator">!</span>el<span class="token punctuation">.</span>component <span class="token operator">||</span> <span class="token operator">!</span><span class="token function">isReservedTag</span><span class="token punctuation">(</span>el<span class="token punctuation">.</span>tag<span class="token punctuation">)</span>

transforms <span class="token operator">=</span> <span class="token function">pluckModuleFunction</span><span class="token punctuation">(</span>options<span class="token punctuation">.</span>modules<span class="token punctuation">,</span> <span class="token string">'transformNode'</span><span class="token punctuation">)</span>
preTransforms <span class="token operator">=</span> <span class="token function">pluckModuleFunction</span><span class="token punctuation">(</span>options<span class="token punctuation">.</span>modules<span class="token punctuation">,</span> <span class="token string">'preTransformNode'</span><span class="token punctuation">)</span>
postTransforms <span class="token operator">=</span> <span class="token function">pluckModuleFunction</span><span class="token punctuation">(</span>options<span class="token punctuation">.</span>modules<span class="token punctuation">,</span> <span class="token string">'postTransformNode'</span><span class="token punctuation">)</span>

delimiters <span class="token operator">=</span> options<span class="token punctuation">.</span>delimiters

<span class="token keyword">const</span> preserveWhitespace <span class="token operator">=</span> options<span class="token punctuation">.</span>preserveWhitespace <span class="token operator">!==</span> <span class="token boolean">false</span>
<span class="token keyword">const</span> whitespaceOption <span class="token operator">=</span> options<span class="token punctuation">.</span>whitespace

<span class="token comment">// 其他变量</span>
<span class="token keyword">const</span> stack <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
<span class="token keyword">let</span> root 
<span class="token keyword">let</span> currentParent 
<span class="token keyword">let</span> inVPre <span class="token operator">=</span> <span class="token boolean">false</span> 
<span class="token keyword">let</span> inPre <span class="token operator">=</span> <span class="token boolean">false</span> 
<span class="token keyword">let</span> warned <span class="token operator">=</span> <span class="token boolean">false</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br></div></div><ul><li><code>warn</code>：用来打印警告信息的</li> <li><code>platformIsPreTag</code>：判断标签是否是 <code>pre</code> 标签</li> <li><code>platformMustUseProp</code>：用来检测一个属性在标签中是否要使用元素对象原生的 <code>prop</code> 进行绑定，注意：<strong>这里的 <code>prop</code> 指的是元素对象的属性，而非 <code>Vue</code> 中的 <code>props</code> 概念</strong></li> <li><code>platformGetTagNamespace</code>：用来获取元素(标签)的命名空间</li> <li><code>isReservedTag</code>：判断标签是否是保留的标签</li> <li><code>maybeComponent</code>：判断是否为组件</li> <li><code>transforms</code>：</li></ul> <p>​	我们前面分析过 <code>options</code> 的值，知道 <code>options.module</code> 值如下：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>options<span class="token punctuation">.</span>modules <span class="token operator">=</span> <span class="token punctuation">[</span>
  <span class="token punctuation">{</span>
    <span class="token literal-property property">staticKeys</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'staticClass'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    transformNode<span class="token punctuation">,</span>
    genData
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span>
    <span class="token literal-property property">staticKeys</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'staticStyle'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    transformNode<span class="token punctuation">,</span>
    genData
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span>
    preTransformNode
  <span class="token punctuation">}</span>
<span class="token punctuation">]</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><p>​	我们再来看看 <code>pluckModuleFunction</code> 函数的定义，如下：</p> <p>​	源码目录：<code>src/compiler/helpers.js</code></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">export</span> <span class="token keyword">function</span> pluckModuleFunction<span class="token operator">&lt;</span><span class="token constant">F</span><span class="token operator">:</span> Function<span class="token operator">&gt;</span> <span class="token punctuation">(</span>
  <span class="token literal-property property">modules</span><span class="token operator">:</span> <span class="token operator">?</span>Array<span class="token operator">&lt;</span>Object<span class="token operator">&gt;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">key</span><span class="token operator">:</span> string
<span class="token punctuation">)</span><span class="token operator">:</span> Array<span class="token operator">&lt;</span><span class="token constant">F</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> modules
    <span class="token operator">?</span> modules<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token parameter">m</span> <span class="token operator">=&gt;</span> m<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token parameter">_</span> <span class="token operator">=&gt;</span> _<span class="token punctuation">)</span>
    <span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>​	<code>pluckModuleFunction</code> 函数的作用是从第一个参数中&quot;采摘&quot;出函数名字与第二个参数所指定字符串相同的函数，并将它们组成一个数组。</p> <p>​	源码中 <code>transforms</code> 的值的获取代码如下：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>transforms <span class="token operator">=</span> <span class="token function">pluckModuleFunction</span><span class="token punctuation">(</span>options<span class="token punctuation">.</span>modules<span class="token punctuation">,</span> <span class="token string">'transformNode'</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>​	调用这句代码，我们分两步来看，第一步是 <code>map</code> ，即如下：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>options<span class="token punctuation">.</span>modules<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token parameter">m</span> <span class="token operator">=&gt;</span> m<span class="token punctuation">[</span><span class="token string">'transformNode'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>​	所以第一步通过 <code>map</code> 遍历后的值为：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token punctuation">[</span>
  transformNode<span class="token punctuation">,</span>
  transformNode<span class="token punctuation">,</span>
  <span class="token keyword">undefined</span>
<span class="token punctuation">]</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>​	接着我们继续看第二步，如下：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token punctuation">[</span>
  transformNode<span class="token punctuation">,</span>
  transformNode<span class="token punctuation">,</span>
  <span class="token keyword">undefined</span>
<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token parameter">_</span> <span class="token operator">=&gt;</span> _<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>​	<code>filter</code> 的作用是过滤掉 <code>undefined</code> ，所以最终得到的 <code>transforms</code> 为，如下：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token punctuation">[</span>
  transformNode<span class="token punctuation">,</span>
  transformNode
<span class="token punctuation">]</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><ul><li><code>preTransforms</code>：同 <code>transforms</code>，所以最终得到的 <code>preTransforms</code>为 ：</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token punctuation">[</span> preTransformNode <span class="token punctuation">]</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><ul><li><code>postTransforms</code>：同 <code>transforms</code>，所以最终得到的 <code>postTransforms</code> 为 ：</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token punctuation">[</span><span class="token punctuation">]</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><ul><li><code>delimiters</code>：改变纯文本插入分隔符。修改指令的书写风格，比如默认是 <code> delimiters: ['${', '}']</code>之后变成这样 <code>${mgs}</code></li> <li><code>preserveWhitespace</code>：判断是否保留元素之间的空白，用来告诉编译器在编译 <code>html</code> 字符串时是否放弃标签之间的空格，如果为 <code>true</code> 则代表放弃</li> <li><code>whitespaceOption</code>：空白处理策略，<code>'preserve' | 'condense'</code></li> <li><code>stack</code>：是用来修正当前正在解析元素的父级</li> <li><code>root</code>：定义<code>AST</code>模型对象</li> <li><code>currentParent</code>：描述对象之间的父子关系</li> <li><code>inVPre</code>：标识当前解析的标签是否在拥有 <code>v-pre</code> 的标签之内</li> <li><code>inPre</code>：标识当前正在解析的标签是否在 <code>&lt;pre&gt;&lt;/pre&gt;</code> 标签之内</li> <li><code>warned</code>：标识只会打印一次警告信息，默认为 <code>false</code></li></ul> <h3 id="_5-2-处理标签"><a href="#_5-2-处理标签" class="header-anchor">#</a> 5.2 处理标签</h3> <div class="custom-block danger"><p class="title"></p><p>说明：关于 <code>parse</code> 中处理标签我们会在 <a href="https://lotosv2010.github.io/view/vue/2018/10120800.html" target="_blank" rel="noopener noreferrer">第十二章<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 做详细分析。</p></div><h2 id="_6-参考资料"><a href="#_6-参考资料" class="header-anchor">#</a> 6. 参考资料</h2> <blockquote><p><a href="https://www.jianshu.com/p/681d3e07fb0f" target="_blank" rel="noopener noreferrer">JS正则表达式一条龙<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p><a href="https://blog.csdn.net/hmxhh/article/details/45195449" target="_blank" rel="noopener noreferrer">正则表达式图解<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p><a href="https://www.colabug.com/2019/0617/6456060/" target="_blank" rel="noopener noreferrer">Vue parse之 从template到astElement 源码详解<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></blockquote></div></section> <footer class="page-edit"><!----> <!----></footer> <!----> <div class="comments-wrapper"><!----></div></main></div> <!----></div> <ul class="sub-sidebar sub-sidebar-wrapper" style="width:12rem;" data-v-b57cc07c data-v-7dd95ae2><li class="level-2" data-v-b57cc07c><a href="/view/vue/2018/10110800.html#_1-概述" class="sidebar-link reco-side-_1-概述" data-v-b57cc07c>1. 概述</a></li><li class="level-2" data-v-b57cc07c><a href="/view/vue/2018/10110800.html#_2-整体结构" class="sidebar-link reco-side-_2-整体结构" data-v-b57cc07c>2. 整体结构</a></li><li class="level-2" data-v-b57cc07c><a href="/view/vue/2018/10110800.html#_3-正则常量分析" class="sidebar-link reco-side-_3-正则常量分析" data-v-b57cc07c>3. 正则常量分析</a></li><li class="level-3" data-v-b57cc07c><a href="/view/vue/2018/10110800.html#_3-1-onre" class="sidebar-link reco-side-_3-1-onre" data-v-b57cc07c>3.1 onRE</a></li><li class="level-3" data-v-b57cc07c><a href="/view/vue/2018/10110800.html#_3-2-dirre" class="sidebar-link reco-side-_3-2-dirre" data-v-b57cc07c>3.2 dirRE</a></li><li class="level-3" data-v-b57cc07c><a href="/view/vue/2018/10110800.html#_3-3-foraliasre" class="sidebar-link reco-side-_3-3-foraliasre" data-v-b57cc07c>3.3 forAliasRE</a></li><li class="level-3" data-v-b57cc07c><a href="/view/vue/2018/10110800.html#_3-4-foriteratorre" class="sidebar-link reco-side-_3-4-foriteratorre" data-v-b57cc07c>3.4 forIteratorRE</a></li><li class="level-3" data-v-b57cc07c><a href="/view/vue/2018/10110800.html#_3-5-stripparensre" class="sidebar-link reco-side-_3-5-stripparensre" data-v-b57cc07c>3.5 stripParensRE</a></li><li class="level-3" data-v-b57cc07c><a href="/view/vue/2018/10110800.html#_3-6-dynamicargre" class="sidebar-link reco-side-_3-6-dynamicargre" data-v-b57cc07c>3.6 dynamicArgRE</a></li><li class="level-3" data-v-b57cc07c><a href="/view/vue/2018/10110800.html#_3-7-argre" class="sidebar-link reco-side-_3-7-argre" data-v-b57cc07c>3.7 argRE</a></li><li class="level-3" data-v-b57cc07c><a href="/view/vue/2018/10110800.html#_3-8-bindre" class="sidebar-link reco-side-_3-8-bindre" data-v-b57cc07c>3.8 bindRE</a></li><li class="level-3" data-v-b57cc07c><a href="/view/vue/2018/10110800.html#_3-9-propbindre" class="sidebar-link reco-side-_3-9-propbindre" data-v-b57cc07c>3.9 propBindRE</a></li><li class="level-3" data-v-b57cc07c><a href="/view/vue/2018/10110800.html#_3-10-modifierre" class="sidebar-link reco-side-_3-10-modifierre" data-v-b57cc07c>3.10 modifierRE</a></li><li class="level-3" data-v-b57cc07c><a href="/view/vue/2018/10110800.html#_3-11-slotre" class="sidebar-link reco-side-_3-11-slotre" data-v-b57cc07c>3.11 slotRE</a></li><li class="level-3" data-v-b57cc07c><a href="/view/vue/2018/10110800.html#_3-12-linebreakre" class="sidebar-link reco-side-_3-12-linebreakre" data-v-b57cc07c>3.12 lineBreakRE</a></li><li class="level-3" data-v-b57cc07c><a href="/view/vue/2018/10110800.html#_3-13-whitespacere" class="sidebar-link reco-side-_3-13-whitespacere" data-v-b57cc07c>3.13 whitespaceRE</a></li><li class="level-3" data-v-b57cc07c><a href="/view/vue/2018/10110800.html#_3-14-invalidattributere" class="sidebar-link reco-side-_3-14-invalidattributere" data-v-b57cc07c>3.14 invalidAttributeRE</a></li><li class="level-3" data-v-b57cc07c><a href="/view/vue/2018/10110800.html#_3-15-解码函数" class="sidebar-link reco-side-_3-15-解码函数" data-v-b57cc07c>3.15 解码函数</a></li><li class="level-3" data-v-b57cc07c><a href="/view/vue/2018/10110800.html#_3-16-平台化选项变量" class="sidebar-link reco-side-_3-16-平台化选项变量" data-v-b57cc07c>3.16 平台化选项变量</a></li><li class="level-2" data-v-b57cc07c><a href="/view/vue/2018/10110800.html#_4-createastelement-函数" class="sidebar-link reco-side-_4-createastelement-函数" data-v-b57cc07c>4. createASTElement 函数</a></li><li class="level-2" data-v-b57cc07c><a href="/view/vue/2018/10110800.html#_5-parse" class="sidebar-link reco-side-_5-parse" data-v-b57cc07c>5. parse</a></li><li class="level-3" data-v-b57cc07c><a href="/view/vue/2018/10110800.html#_5-1-变量" class="sidebar-link reco-side-_5-1-变量" data-v-b57cc07c>5.1 变量</a></li><li class="level-3" data-v-b57cc07c><a href="/view/vue/2018/10110800.html#_5-2-处理标签" class="sidebar-link reco-side-_5-2-处理标签" data-v-b57cc07c>5.2 处理标签</a></li><li class="level-2" data-v-b57cc07c><a href="/view/vue/2018/10110800.html#_6-参考资料" class="sidebar-link reco-side-_6-参考资料" data-v-b57cc07c>6. 参考资料</a></li></ul></div></div></div><div class="global-ui"><div class="back-to-ceiling" style="right:1rem;bottom:6rem;width:2.5rem;height:2.5rem;border-radius:.25rem;line-height:2.5rem;display:none;" data-v-c6073ba8 data-v-c6073ba8><svg t="1574745035067" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="5404" class="icon" data-v-c6073ba8><path d="M526.60727968 10.90185116a27.675 27.675 0 0 0-29.21455937 0c-131.36607665 82.28402758-218.69155461 228.01873535-218.69155402 394.07834331a462.20625001 462.20625001 0 0 0 5.36959153 69.94390903c1.00431239 6.55289093-0.34802892 13.13561351-3.76865779 18.80351572-32.63518765 54.11355614-51.75690182 118.55860487-51.7569018 187.94566865a371.06718723 371.06718723 0 0 0 11.50484808 91.98906777c6.53300375 25.50556257 41.68394495 28.14064038 52.69160883 4.22606766 17.37162448-37.73630017 42.14135425-72.50938081 72.80769204-103.21549295 2.18761121 3.04276886 4.15646224 6.24463696 6.40373557 9.22774369a1871.4375 1871.4375 0 0 0 140.04691725 5.34970492 1866.36093723 1866.36093723 0 0 0 140.04691723-5.34970492c2.24727335-2.98310674 4.21612437-6.18497483 6.3937923-9.2178004 30.66633723 30.70611158 55.4360664 65.4791928 72.80769147 103.21549355 11.00766384 23.91457269 46.15860503 21.27949489 52.69160879-4.22606768a371.15156223 371.15156223 0 0 0 11.514792-91.99901164c0-69.36717486-19.13165746-133.82216804-51.75690182-187.92578088-3.42062944-5.66790279-4.76302748-12.26056868-3.76865837-18.80351632a462.20625001 462.20625001 0 0 0 5.36959269-69.943909c-0.00994388-166.08943902-87.32547796-311.81420293-218.6915546-394.09823051zM605.93803103 357.87693858a93.93749974 93.93749974 0 1 1-187.89594924 6.1e-7 93.93749974 93.93749974 0 0 1 187.89594924-6.1e-7z" p-id="5405" data-v-c6073ba8></path><path d="M429.50777625 765.63860547C429.50777625 803.39355007 466.44236686 1000.39046097 512.00932183 1000.39046097c45.56695499 0 82.4922232-197.00623328 82.5015456-234.7518555 0-37.75494459-36.9345906-68.35043303-82.4922232-68.34111062-45.57627738-0.00932239-82.52019037 30.59548842-82.51086798 68.34111062z" p-id="5406" data-v-c6073ba8></path></svg></div></div></div>
    <script src="/assets/js/app.ad2c5d61.js" defer></script><script src="/assets/js/4.82f582a9.js" defer></script><script src="/assets/js/1.72e48573.js" defer></script><script src="/assets/js/52.5a757ff9.js" defer></script>
  </body>
</html>
